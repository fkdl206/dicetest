#include <stdio.h>
#include <stdlib.h>

struct student{
int id;
char name[20];
int kor,eng,math;
int sum;
float avg;
struct student *link;
};

void input(struct student **root){
struct student *tmp;
struct student *search;
tmp = (struct student*)malloc(sizeof(struct student));
printf("학번 입력 : ");
scanf("%d",&tmp->id);
printf("이름 입력 : ");
//중복값 검사 함수 
scanf("%s",tmp->name);
printf("국어 점수 : ");
scanf("%d",&tmp->kor);
printf("영어 점수 : ");
scanf("%d",&tmp->eng);
printf("수학 점수 : ");
scanf("%d",&tmp->math);
tmp->sum = tmp->kor + tmp->eng + tmp->math;
tmp->avg = (float)tmp->sum/3;
tmp->link = NULL;

if(*root == NULL){
*root = tmp;
}else if((*root)->id > tmp->id){
tmp->link = *root;
*root = tmp;
}else{
search = *root;
while(1){
if(search->id == tmp->id){
printf("중복!!! \n");
free(tmp);
break;
}
if(search->link == NULL){
search->link = tmp;
break;
}
if(search->link->id > tmp->id){
tmp->link = search->link;
search->link = tmp;
break;
}
search = search->link;
}
}

}

void output(struct student *root){
printf("|%4s|%10s|%4s|%4s|%4s|%4s|%6s|\n",
"ID","이름","국어","영어","수학","합계","평균");
while(root){
printf("|%4d|%10s|%4d|%4d|%4d|%4d|%6.2f|\n",
root->id,root->name,root->kor,root->eng,root->math,
root->sum,root->avg);
root = root->link;
}
}

void exit_func(struct student *root){
struct student * dummy;
while(root){
dummy = root;
root = root->link;
free(dummy);
}
}

int main(){
struct student *root = NULL;
int sel;

while(1){
printf("학생 성적관리 프로그램 \n");
printf("1. 입력\n");
printf("2. 출력\n");
printf("3. 수정\n");
printf("4. 삭제\n");
printf("5. save\n");
printf("6. load\n");
printf("0. 종료\n");
printf("> ");
scanf("%d",&sel);
switch(sel){
case 1:
input(&root);
break;
case 2:
output(root);
break;
case 3:
break;
case 4:
break;
case 5:
break;
case 6:

break;
case 0:
printf("프로그램을 종료합니다.\n");
exit_func(root);
exit(0);
break;
}
}


return 0;
}
